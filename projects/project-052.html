<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tizian Rein - Ipsum Dolor Sit</title>
    <link rel="stylesheet" href="../css/style.css">

    <style>
        /* --- PROJECT SPECIFIC LAYOUT --- */
        main {
            padding-top: calc(var(--header-font-size) + (var(--header-padding) * 3));
            padding-bottom: 80px;
        }

        .project-main-layout {
            align-items: start;
            gap: 20px;
        }

        .project-text {
            grid-column: 1 / 3;
            position: sticky;
            top: 40px;
        }

        .project-text p {
            font-family: Arial, sans-serif;
            font-size: 15px;
            line-height: 1.3;
            margin: 0;
            max-width: 90%;
        }

        .project-gallery {
            grid-column: 3 / -1;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .gallery-track {
            display: flex;
            height: 100%;
            transition: transform 0.7s ease-in-out;
        }

        .gallery-slide {
            flex-shrink: 0;
            width: 100%;
            height: 100%;
        }

        .gallery-slide img {
            width: 100%;
            height: auto;
            max-height: 80vh; 
            object-fit: contain; 
            display: block;
        }
        
        .slider-btn {
            position: absolute;
            top: 0px;
            z-index: 10;
            background: none;
            border: none;
            padding: 15px;
            font-size: 1.5rem;
            color: var(--text-color);
            cursor: pointer;
        }

        .slider-btn.is-hidden {
            opacity: 0;
            pointer-events: none;
        }

        .prev-btn { left: 180px; }
        .next-btn { right: 180px; }
        
        /* --- UPDATED: LIGHTBOX STYLES --- */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--background-color);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between; /* Creates space for arrows */
            padding: 20px;
            box-sizing: border-box;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .lightbox-overlay.is-visible {
            opacity: 1;
            pointer-events: auto;
        }

        .lightbox-image {
            max-width: 90%;
            max-height: 95%;
            object-fit: contain;
        }

        .lightbox-close {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: var(--text-color);
            background: none;
            border: none;
            cursor: pointer;
            z-index: 1002; /* Ensure it's above arrows */
        }

        /* Style for the new lightbox arrows */
        .lightbox-btn {
            position: static; /* Let flexbox handle positioning */
            transform: none;
            z-index: 1001;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 1024px) {
            main {
                padding-top: calc(var(--header-font-size) + (var(--header-padding) * 3));
            }
            .project-main-layout {
                display: flex;
                flex-direction: column;
                gap: 40px;
            }
            .project-text,
            .project-gallery {
                grid-column: auto;
                width: 100%;
                position: relative; 
            }
            .project-text { position: static; }
            .project-text p { font-size: 16px; max-width: 100%; }
            .prev-btn { left: 10px; }
            .next-btn { right: 10px; }
        }
    </style>
</head>
<body>

    <!-- Manually added Mobile Navigation and Header -->
    <div class="corner-nav" aria-label="Mobile corner navigation"><a class="corner top-left" href="../index.html">tizian rein</a><a class="corner top-right" href="../info.html">info</a><a class="corner bottom-left" href="https://instagram.com/tizianrein" target="_blank" rel="noopener">instagram</a><a class="corner bottom-right" href="../contact.html">contact</a></div>
    <header><div class="grid-container"><h1 class="site-title"><a class="site-title-link" href="../index.html">tizian rein</a></h1><a href="../index.html" id="nav-work" class="active">work</a><a href="../info.html" id="nav-info">information</a><a href="../contact.html" id="nav-contact">contact</a></div></header>

    <main>
        <div class="grid-container project-main-layout">
            
            <section class="project-text">
                 <p>052<br>ZAKK Garden Chair<br><br>This is where you describe your project. Talk about the concept, the materials used, and the process. Keep it concise and impactful. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            </section>

            <section class="project-gallery">
                <div class="gallery-track">
                    <div class="gallery-slide"><img src="../images/projects/053.1.jpg" alt="Project view 1"></div>
                    <div class="gallery-slide"><img src="../images/projects/053.2.jpg" alt="Project view 2"></div>
                    <div class="gallery-slide"><img src="../images/projects/053.3.jpg" alt="Project view 3"></div>
                    <div class="gallery-slide"><img src="../images/projects/053.4.jpg" alt="Project view 4"></div>
                    <div class="gallery-slide"><img src="../images/projects/053.5.jpg" alt="Project view 5"></div>
                    <div class="gallery-slide"><img src="../images/projects/053.6.jpg" alt="Project view 6"></div>
                    <div class="gallery-slide"><img src="../images/projects/053.7.jpg" alt="Project view 7"></div>
                </div>

                <button class="slider-btn prev-btn">&larr;</button>
                <button class="slider-btn next-btn">&rarr;</button>
            </section>
        </div>
    </main>

    <!-- UPDATED: HTML for the Lightbox with Arrows -->
    <div id="lightbox" class="lightbox-overlay">
        <button class="lightbox-close">&times;</button>
        <button class="slider-btn lightbox-btn prev-btn">&larr;</button>
        <img class="lightbox-image" src="" alt="Full-screen project view">
        <button class="slider-btn lightbox-btn next-btn">&rarr;</button>
    </div>


    <!-- UPDATED JAVASCRIPT: Handles fullscreen swipe, keys, and arrows -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gallery = document.querySelector('.project-gallery');
            const track = document.querySelector('.gallery-track');
            
            if (gallery && track) {
                const slides = Array.from(track.children);
                const nextButton = gallery.querySelector('.next-btn');
                const prevButton = gallery.querySelector('.prev-btn');
                const slideCount = slides.length;
                let currentSlide = 0;

                // --- LIGHTBOX ELEMENTS ---
                const lightbox = document.getElementById('lightbox');
                const lightboxImage = lightbox.querySelector('.lightbox-image');
                const lightboxNextButton = lightbox.querySelector('.next-btn');
                const lightboxPrevButton = lightbox.querySelector('.prev-btn');
                const closeButton = lightbox.querySelector('.lightbox-close');

                // --- CORE NAVIGATION LOGIC ---
                const moveToSlide = (targetSlide) => {
                    // Ensure targetSlide is within bounds
                    if (targetSlide < 0 || targetSlide >= slideCount) return;
                    
                    track.style.transform = `translateX(-${targetSlide * 100}%)`;
                    currentSlide = targetSlide;
                    updateArrows();
                    
                    // If lightbox is open, update its image too
                    if (lightbox.classList.contains('is-visible')) {
                        updateLightboxImage();
                    }
                };
                
                const next = () => moveToSlide(currentSlide + 1);
                const prev = () => moveToSlide(currentSlide - 1);

                // --- UPDATE UI ELEMENTS ---
                const updateArrows = () => {
                    const isHidden = slideCount <= 1;
                    // Main gallery arrows
                    prevButton.classList.toggle('is-hidden', currentSlide === 0 || isHidden);
                    nextButton.classList.toggle('is-hidden', currentSlide === slideCount - 1 || isHidden);
                    // Lightbox arrows
                    lightboxPrevButton.classList.toggle('is-hidden', currentSlide === 0 || isHidden);
                    lightboxNextButton.classList.toggle('is-hidden', currentSlide === slideCount - 1 || isHidden);
                };

                const updateLightboxImage = () => {
                    const currentImageSrc = slides[currentSlide].querySelector('img').src;
                    lightboxImage.src = currentImageSrc;
                };

                // --- LIGHTBOX CONTROLS ---
                const openLightbox = () => {
                    updateLightboxImage();
                    lightbox.classList.add('is-visible');
                    document.body.style.overflow = 'hidden'; // Prevent background scroll
                };

                const closeLightbox = () => {
                    lightbox.classList.remove('is-visible');
                    document.body.style.overflow = ''; // Restore scroll
                };

                // --- EVENT LISTENERS ---
                // Main gallery buttons
                nextButton.addEventListener('click', next);
                prevButton.addEventListener('click', prev);
                track.addEventListener('click', openLightbox);

                // Lightbox buttons and events
                lightboxNextButton.addEventListener('click', next);
                lightboxPrevButton.addEventListener('click', prev);
                closeButton.addEventListener('click', closeLightbox);
                lightbox.addEventListener('click', (e) => {
                    if (e.target === lightbox) closeLightbox(); // Close on background click
                });

                // Keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (!lightbox.classList.contains('is-visible')) return; // Only when lightbox is open
                    if (e.key === 'ArrowRight') next();
                    if (e.key === 'ArrowLeft') prev();
                    if (e.key === 'Escape') closeLightbox();
                });

                // Swipe navigation (for both gallery and lightbox)
                let touchStartX = 0;
                let touchEndX = 0;
                const swipeThreshold = 50;
                
                const handleSwipe = () => {
                    if (touchEndX < touchStartX - swipeThreshold) next(); // Swiped left
                    if (touchEndX > touchStartX + swipeThreshold) prev(); // Swiped right
                };
                
                const onTouchStart = (e) => { touchStartX = e.changedTouches[0].screenX; };
                const onTouchEnd = (e) => { touchEndX = e.changedTouches[0].screenX; handleSwipe(); };
                
                gallery.addEventListener('touchstart', onTouchStart, { passive: true });
                gallery.addEventListener('touchend', onTouchEnd);
                lightbox.addEventListener('touchstart', onTouchStart, { passive: true });
                lightbox.addEventListener('touchend', onTouchEnd);

                // --- INITIALIZE ---
                updateArrows();
            }
        });
    </script>

</body>
</html>