<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tizian Rein // Praxis</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap');
        :root {
            --background: #000000; --foreground: #ffffff;
            --ui-border: rgba(255, 255, 255, 0.2);
            --ui-grid-cross: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 29.5V30.5M29.5 30H30.5' stroke='%23555' stroke-width='1'/%3E%3C/svg%3E");
            --ui-text-light: rgba(255, 255, 255, 0.5);
            --panel-bg: rgba(0,0,0,0.7);
            --highlight-bg: rgba(255,255,255,0.1);
            --scrollbar-thumb: #333; --scrollbar-track: #111;

            --c1: #00fffa; --c2: #ff4a4a; --c3: #55ff3d;
            --c4: #ff3df4; --c5: #ffa800; --c6: #a800ff;
        }
        body.light-mode {
            --background: #ffffff; --foreground: #000000;
            --ui-border: rgba(0, 0, 0, 0.2);
            --ui-grid-cross: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 29.5V30.5M29.5 30H30.5' stroke='%23bbb' stroke-width='1'/%3E%3C/svg%3E");
            --ui-text-light: rgba(0, 0, 0, 0.5);
            --panel-bg: rgba(255,255,255,0.7);
            --highlight-bg: rgba(0,0,0,0.1);
            --scrollbar-thumb: #ccc; --scrollbar-track: #eee;
        }
        body { margin: 0; background-color: var(--background); color: var(--foreground); font-family: 'Roboto Mono', monospace; overflow: hidden; background-image: var(--ui-grid-cross); transition: background-color 0.3s ease, color 0.3s ease; }
        
        #three-canvas {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1; cursor: grab;
        }
        #three-canvas:active { cursor: grabbing; }

        .panel {
            position: fixed; top: 0; height: 100vh;
            padding: 2rem; box-sizing: border-box;
            background: var(--panel-bg); backdrop-filter: blur(5px);
            overflow-y: auto;
            transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.4s ease;
            z-index: 2;
        }
        .panel::-webkit-scrollbar { width: 8px; }
        .panel::-webkit-scrollbar-track { background: var(--scrollbar-track); }
        .panel::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); }

        #project-list-panel { left: 0; width: 300px; border-right: 1px solid var(--ui-border); }
        #preview-panel { right: 0; width: 350px; border-left: 1px solid var(--ui-border); }
        
        #project-list-panel h2 { margin-top: 0; font-size: 1rem; color: var(--ui-text-light); letter-spacing: 2px; }
        #project-list { list-style: none; padding: 0; margin: 0; }
        #project-list li { padding: 8px 10px; cursor: pointer; border: 1px solid transparent; transition: background-color 0.2s, border-color 0.2s; }
        #project-list li.highlighted, #project-list li:hover { background-color: var(--highlight-bg); border-color: var(--ui-border); }
        
        #preview-panel.hidden { opacity: 0; pointer-events: none; transition: opacity 0.2s; }
        #preview-panel:not(.hidden) { opacity: 1; transition: opacity 0.2s; }
        #preview-panel img { width: 100%; height: 150px; object-fit: cover; border: 1px solid var(--ui-border); background: #333; }
        #preview-panel h3 { margin: 1rem 0 0.5rem 0; font-size: 1.2rem; }
        #preview-panel p { margin: 0 0 1rem 0; font-size: 0.8rem; color: var(--ui-text-light); line-height: 1.6; }
        #preview-panel hr { border: none; height: 1px; background-color: var(--ui-border); margin: 1rem 0; }
        #preview-panel .data-readout { list-style: none; padding: 0; margin: 0; font-size: 0.7rem; }
        #preview-panel .data-readout li { display: flex; justify-content: space-between; margin-bottom: 4px; }
        
        .topic-label { position: absolute; font-size: 14px; pointer-events: none; user-select: none; text-shadow: 0 0 8px var(--background), 0 0 8px var(--background); z-index: 3; transition: color 0.3s ease, text-shadow 0.3s ease; }
        .bottom-ui { position: fixed; bottom: 2rem; width: 100%; display: flex; justify-content: center; gap: 2rem; z-index: 50; text-align: center; pointer-events: none; }
        .bottom-ui a { pointer-events: all; color: var(--foreground); text-decoration: none; cursor: pointer; font-size: 14px; background-color: var(--background); padding: 5px; transition: background-color 0.3s ease, color 0.3s ease; }
        
        .mobile-ui-toggle { display: none; }
        @media (max-width: 900px) {
            #project-list-panel { transform: translateX(-100%); }
            #preview-panel { display: none; } /* Simplification for mobile: hide preview panel */
            .panel.visible { transform: translateX(0); }
            .bottom-ui { display: none; }
            .mobile-ui-toggle {
                display: block; position: fixed; bottom: 2rem;
                background: var(--panel-bg); border: 1px solid var(--ui-border);
                padding: 10px 15px; font-size: 0.8rem; z-index: 100; cursor: pointer;
            }
            #mobile-list-btn { left: 2rem; } #mobile-info-btn { right: 2rem; }
            .topic-label { font-size: 12px; }
        }
    </style>
</head>
<body>
    <main id="three-canvas"></main>
    
    <aside id="project-list-panel" class="panel"><h2 id="list-title">[PROJECT_LOG]</h2><ul id="project-list"></ul></aside>
    <aside id="preview-panel" class="panel hidden">
        <img id="preview-image" src="" alt="Project Preview"><h3 id="preview-title"></h3><p id="preview-desc"></p><hr>
        <ul class="data-readout" id="preview-topics"></ul>
    </aside>

    <footer class="bottom-ui">
        <a id="name-plate">Tizian Rein</a>
        <a id="theme-toggle">[ System: Dark / Light ]</a>
        <a id="info-btn">Info / CV</a>
    </footer>

    <!-- Mobile UI Buttons and Panels -->
    <div id="mobile-list-btn" class="mobile-ui-toggle">[ Project List ]</div>
    <div id="mobile-info-btn" class="mobile-ui-toggle">[ Info / CV ]</div>
    <aside id="info-panel" class="panel" style="display: none; left:0; transform: translateX(-100%);">
         <h2>Tizian Rein</h2><p>Architect focused on the intersection of preservation and emergent digital technologies...</p><p><a href="#" style="color: var(--c1);">Download CV (PDF)</a></p>
    </aside>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        // --- DATA (20 projects, updated keys) ---
        const interestsConfig = [ { name: 'computation', title: 'Computation', color: [0, 255, 250] }, { name: 'preservation', title: 'Preservation', color: [255, 74, 74] }, { name: 'robotics', title: 'Robotics', color: [85, 255, 61] }, { name: 'architectonics', title: 'Architectonics', color: [255, 61, 244] }, { name: 'writing', title: 'Writing', color: [255, 168, 0] }, { name: 'furniture', title: 'Furniture', color: [168, 0, 255] }];
        const projects = [
            { id: 1, title: 'Generative Masonry', desc: '...', image: 'https://i.imgur.com/8FkP4k9.png', interests: { computation: 0.9, preservation: 0.6, robotics: 0.7, architectonics: 0.3, writing: 0.1, furniture: 0.1 }, connections: [3, 4, 11] }, { id: 2, title: 'The Digital Archive', desc: '...', image: 'https://i.imgur.com/G3Gv2X5.png', interests: { computation: 0.4, preservation: 0.8, robotics: 0.2, architectonics: 0.9, writing: 0.9, furniture: 0.0 }, connections: [5, 15] }, { id: 3, title: 'Robotic Wood Joints', desc: '...', image: 'https://i.imgur.com/3e5sYhJ.png', interests: { computation: 0.7, preservation: 0.3, robotics: 0.9, architectonics: 0.1, writing: 0.1, furniture: 0.8 }, connections: [1, 7, 12] }, { id: 4, title: 'Point Cloud Preservation', desc: '...', image: 'https://i.imgur.com/9O8kK6K.png', interests: { computation: 0.8, preservation: 0.9, robotics: 0.5, architectonics: 0.2, writing: 0.2, furniture: 0.0 }, connections: [1, 9] }, { id: 5, title: 'Critique of Automation', desc: '...', image: 'https://i.imgur.com/tH3Gf8J.png', interests: { computation: 0.1, preservation: 0.2, robotics: 0.3, architectonics: 0.9, writing: 1.0, furniture: 0.0 }, connections: [2, 13] }, { id: 6, title: 'CNC-Milled Chair', desc: '...', image: 'https://i.imgur.com/qE2B3S1.png', interests: { computation: 0.6, preservation: 0.1, robotics: 0.4, architectonics: 0.2, writing: 0.0, furniture: 0.9 }, connections: [7, 3] }, { id: 7, title: 'Human-Robot Craft', desc: '...', image: 'https://i.imgur.com/8FkP4k9.png', interests: { computation: 0.5, preservation: 0.4, robotics: 0.8, architectonics: 0.5, writing: 0.3, furniture: 0.6 }, connections: [3, 6, 14] }, { id: 8, title: 'Venetian Scaffolding Study', desc: '...', image: 'https://i.imgur.com/G3Gv2X5.png', interests: { computation: 0.1, preservation: 0.9, robotics: 0.0, architectonics: 0.4, writing: 0.6, furniture: 0.3 }, connections: [2, 4] }, { id: 9, title: 'AI in Urban Planning', desc: '...', image: 'https://i.imgur.com/3e5sYhJ.png', interests: { computation: 0.9, preservation: 0.7, robotics: 0.6, architectonics: 0.6, writing: 0.5, furniture: 0.0 }, connections: [4, 1, 16] }, { id: 10, title: 'The Tectonic Statement', desc: '...', image: 'https://i.imgur.com/9O8kK6K.png', interests: { computation: 0.2, preservation: 0.5, robotics: 0.1, architectonics: 0.8, writing: 0.9, furniture: 0.4 }, connections: [2, 5, 8] }, { id: 11, title: '3D Printed Facades', desc: '...', image: 'https://i.imgur.com/tH3Gf8J.png', interests: { computation: 0.8, preservation: 0.4, robotics: 0.9, architectonics: 0.2, writing: 0.1, furniture: 0.1 }, connections: [1, 3] }, { id: 12, title: 'Plywood Pavilion', desc: '...', image: 'https://i.imgur.com/qE2B3S1.png', interests: { computation: 0.7, preservation: 0.2, robotics: 0.3, architectonics: 0.1, writing: 0.0, furniture: 0.7 }, connections: [3, 6] }, { id: 13, title: 'Ontology of the Tool', desc: '...', image: 'https://i.imgur.com/8FkP4k9.png', interests: { computation: 0.1, preservation: 0.1, robotics: 0.4, architectonics: 1.0, writing: 0.8, furniture: 0.2 }, connections: [5, 7] }, { id: 14, title: 'Adaptive Gripper Design', desc: '...', image: 'https://i.imgur.com/G3Gv2X5.png', interests: { computation: 0.6, preservation: 0.1, robotics: 1.0, architectonics: 0.3, writing: 0.0, furniture: 0.5 }, connections: [7, 3, 11] }, { id: 15, title: 'Material Memory', desc: '...', image: 'https://i.imgur.com/3e5sYhJ.png', interests: { computation: 0.3, preservation: 0.9, robotics: 0.1, architectonics: 0.7, writing: 0.9, furniture: 0.2 }, connections: [2, 8, 10] }, { id: 16, title: 'Simulated Environments', desc: '...', image: 'https://i.imgur.com/9O8kK6K.png', interests: { computation: 1.0, preservation: 0.5, robotics: 0.5, architectonics: 0.4, writing: 0.2, furniture: 0.0 }, connections: [9, 4] }, { id: 17, title: 'Robotic Stone Carving', desc: '...', image: 'https://i.imgur.com/tH3Gf8J.png', interests: { computation: 0.7, preservation: 0.7, robotics: 0.9, architectonics: 0.6, writing: 0.1, furniture: 0.1 }, connections: [1, 3, 4] }, { id: 18, title: 'The Unmade Object', desc: '...', image: 'https://i.imgur.com/qE2B3S1.png', interests: { computation: 0.2, preservation: 0.3, robotics: 0.1, architectonics: 0.9, writing: 0.9, furniture: 0.5 }, connections: [10, 13] }, { id: 19, title: 'Drone-based Surveying', desc: '...', image: 'https://i.imgur.com/8FkP4k9.png', interests: { computation: 0.8, preservation: 0.9, robotics: 0.7, architectonics: 0.2, writing: 0.3, furniture: 0.0 }, connections: [4, 9, 17] }, { id: 20, title: 'Digital Joinery Handbook', desc: '...', image: 'https://i.imgur.com/G3Gv2X5.png', interests: { computation: 0.6, preservation: 0.4, robotics: 0.2, architectonics: 0.5, writing: 0.8, furniture: 0.8 }, connections: [3, 6, 12] }
        ];

        let scene, camera, renderer, controls, raycaster;
        const container = document.getElementById('three-canvas');
        const mouse = new THREE.Vector2();
        const CUBE_SIZE = 6;
        const projectMeshes = [], connectionLines = [], topicLabels = [];
        const mainGroup = new THREE.Group();
        let highlightedObject = null;
        let cubeLineMaterial;

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(5, 3, 9);
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true; controls.autoRotate = true; controls.autoRotateSpeed = 0.3;
            controls.enablePan = false; controls.minDistance = 5; controls.maxDistance = 20;
            raycaster = new THREE.Raycaster();
            
            cubeLineMaterial = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.3 });
            mainGroup.add(new THREE.LineSegments(new THREE.EdgesGeometry(new THREE.BoxGeometry(CUBE_SIZE, CUBE_SIZE, CUBE_SIZE)), cubeLineMaterial));
            
            const topics = [
                { name: 'Computation', color: 'var(--c1)', pos: new THREE.Vector3(0, 0, CUBE_SIZE/2 + 0.8) }, { name: 'Preservation', color: 'var(--c2)', pos: new THREE.Vector3(0, 0, -CUBE_SIZE/2 - 0.8) },
                { name: 'Robotics', color: 'var(--c3)', pos: new THREE.Vector3(CUBE_SIZE/2 + 0.8, 0, 0) }, { name: 'Architectonics', color: 'var(--c4)', pos: new THREE.Vector3(-CUBE_SIZE/2 - 0.8, 0, 0) },
                { name: 'Writing', color: 'var(--c5)', pos: new THREE.Vector3(0, CUBE_SIZE/2 + 0.8, 0) }, { name: 'Furniture', color: 'var(--c6)', pos: new THREE.Vector3(0, -CUBE_SIZE/2 - 0.8, 0) },
            ];
            topics.forEach(t => {
                const div = document.createElement('div');
                div.className = 'topic-label'; div.textContent = t.name; div.style.color = t.color;
                div.userData = { position3D: t.pos }; document.body.appendChild(div); topicLabels.push(div);
            });

            const sphereGeom = new THREE.SphereGeometry(0.12, 32, 16);
            projects.forEach(p => {
                const x = (p.interests.computation - p.interests.preservation) * (CUBE_SIZE / 2);
                const y = (p.interests.writing - p.interests.furniture) * (CUBE_SIZE / 2);
                const z = (p.interests.robotics - p.interests.architectonics) * (CUBE_SIZE / 2);
                p.targetPosition = new THREE.Vector3(x,y,z);
                let totalWeight = 0, r=0, g=0, b=0;
                interestsConfig.forEach(ic => { const weight = p.interests[ic.name]; if (weight > 0) { totalWeight += weight; r += ic.color[0] * weight; g += ic.color[1] * weight; b += ic.color[2] * weight; } });
                const sphereColor = new THREE.Color(`rgb(${Math.round(r/totalWeight)}, ${Math.round(g/totalWeight)}, ${Math.round(b/totalWeight)})`);
                const sphere = new THREE.Mesh(sphereGeom, new THREE.MeshBasicMaterial({ color: sphereColor, transparent: true }));
                sphere.position.set(0,0,0); sphere.userData = { project: p }; mainGroup.add(sphere); projectMeshes.push(sphere);
            });
            
            projects.forEach(p1 => {
                const p1Mesh = projectMeshes.find(m => m.userData.project.id === p1.id);
                p1.connections.forEach(connId => { if (p1.id < connId) {
                    const p2Mesh = projectMeshes.find(m => m.userData.project.id === connId);
                    const line = new THREE.Line(new THREE.BufferGeometry().setFromPoints([p1Mesh.position, p2Mesh.position]), new THREE.LineBasicMaterial({ color: 0xaaaaaa, transparent: true, opacity: 0.3 }));
                    line.userData = { startMesh: p1Mesh, endMesh: p2Mesh }; mainGroup.add(line); connectionLines.push(line);
                }});
            });
            scene.add(mainGroup);

            const projectList = document.getElementById('project-list');
            projects.forEach(p => {
                const li = document.createElement('li');
                li.textContent = `XN-${p.id.toString().padStart(3,'0')} // ${p.title}`;
                li.dataset.projectId = p.id;
                li.addEventListener('mouseenter', () => highlightProject(p.id));
                li.addEventListener('mouseleave', () => highlightProject(null));
                projectList.appendChild(li);
            });
            
            window.addEventListener('resize', onWindowResize);
            container.addEventListener('mousemove', onMouseMove);
        }

        function animate() {
            requestAnimationFrame(animate);
            projectMeshes.forEach(mesh => { mesh.position.lerp(mesh.userData.project.targetPosition, 0.05); });
            connectionLines.forEach(line => { const { startMesh, endMesh } = line.userData; line.geometry.setFromPoints([startMesh.position, endMesh.position]); line.geometry.attributes.position.needsUpdate = true; });
            updateLabels(); handleInteractions(); controls.update(); renderer.render(scene, camera);
        }

        function highlightProject(projectId) {
            const project = projects.find(p => p.id === projectId);
            highlightedObject = project ? projectMeshes.find(m => m.userData.project.id === projectId) : null;
            document.querySelectorAll('#project-list li').forEach(li => { li.classList.toggle('highlighted', li.dataset.projectId == projectId); });
            document.getElementById('preview-panel').classList.toggle('hidden', !project);
            if (project) updatePreviewPanel(project);
        }

        function updatePreviewPanel(p) {
            document.getElementById('preview-image').src = p.image;
            document.getElementById('preview-title').textContent = `[ ${p.title} ]`;
            document.getElementById('preview-desc').textContent = p.desc;
            const topicsList = document.getElementById('preview-topics');
            topicsList.innerHTML = '';
            interestsConfig.forEach(ic => {
                const interestValue = p.interests[ic.name];
                if (interestValue > 0.1) {
                    const li = document.createElement('li');
                    li.innerHTML = `<span>// ${ic.title.toUpperCase()}</span><span>${(interestValue * 100).toFixed(0)}%</span>`; topicsList.appendChild(li);
                }
            });
        }
        
        function onMouseMove(event) {
            const rect = container.getBoundingClientRect();
            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
        }

        function handleInteractions() {
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(projectMeshes);
            const intersectedObj = (intersects.length > 0) ? intersects[0].object : null;
            if (intersectedObj) {
                if (!highlightedObject || highlightedObject.userData.project.id !== intersectedObj.userData.project.id) {
                    highlightProject(intersectedObj.userData.project.id);
                }
            }
        }
        
        function updateLabels() {
            topicLabels.forEach(label => {
                const pos = label.userData.position3D.clone().project(camera);
                const x = (pos.x * .5 + .5) * window.innerWidth;
                const y = (pos.y * -.5 + .5) * window.innerHeight;
                label.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
                label.style.opacity = pos.z < 1 ? 1 : 0;
            });
        }

        function onWindowResize() {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }

        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            const newLineColor = isLight ? 0x000000 : 0xffffff;
            cubeLineMaterial.color.setHex(newLineColor);
        });

        init();
        animate();
    </script>
</body>
</html>